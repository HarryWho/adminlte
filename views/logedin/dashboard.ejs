<div class="row">



  <div class="col-md-12">
    <div class="nav-tabs-custom">
      <ul class="nav nav-tabs">
        <li class="active"><a href="#activity" data-toggle="tab">Activity</a></li>
        <li><a href="#expence" data-toggle="tab">Expense Tracker</a></li>
        <li><a href="#settings" data-toggle="tab">Settings</a></li>
      </ul>
      <div class="tab-content">
        <div class="active tab-pane" id="activity">
          <div class="pull-right" style="height:20px">
            <a href="/blog/new" class="btn-box-tool" title="Add Blog" style="width:50px !important;background:lightgreen;border-radius:100%"><i class="fa fa-plus"></i></a>
            <!-- <textarea class="form-control" style="border-radius:5px;" rows="1" cols="60" name="blogArea" id="blogArea" placeholder="Whats on your mind?"></textarea> -->
          </div>
          <div id="blog-posts">
            <%- include('./blog/post_template.ejs') %>
          </div>
        </div>
        <!-- /.tab-pane -->
        <div class="tab-pane" id="expence">
          <%- include('expence/expence_tracker.ejs') %>

        </div>
        <!-- /.tab-pane -->

        <div class="tab-pane" id="settings">

        </div>
        <!-- /.tab-content -->
      </div>
      <!-- /.nav-tabs-custom -->
    </div>
    <!-- /.col -->
  </div>

  <!-- /.row -->
</div>
<div class="modal" id="myModal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Default Modal</h4>
      </div>
      <div class="modal-body">
        <p>Whats on your mind?&hellip;</p>
        <textarea class="form-control" style="border-radius:5px;" rows="6" cols="60" name="m_blogArea" id="m_blogArea" placeholder="Whats on your mind?"></textarea>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="saveBlog">Save changes</button>
      </div>
    </div>
    <!-- /.modal-content -->
  </div>
  <!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<script>
  const txtBlogArea = document.getElementById('blogArea').parentElement


  txtBlogArea.addEventListener('mousedown', e => {
    $("#myModal").modal('show')
  })

  $('#saveBlog').on('click', async function() {

    const data = {
      blog: $('#m_blogArea').val()
    }

    const result = await DoAjax(data, '/blog', (result) => {

      alert('Returned Result: ' + result)
    })

    $('#m_blogArea').val('')
    $('#myModal').modal('hide')
      // $.ajax({
      //   method: "POST",
      //   url: action,
      //   data: data,
      //   success: function(result) {
      //     if (result == 'Successfully Saved') {
      //       $("#saveSkin").html("Saved!!")
      //         .fadeOut("slow", function() {});
      //       $("#msg").html(result).fadeToggle('slow', function() {
      //         $("#msg").html(result)
      //           .fadeOut('slow', function() {});
      //       });
      //     } else {
      //       $("#msg").html('').fadeToggle('fast', function() {
      //         $("#msg").html(result)
      //           .fadeOut('slow', function() {});
      //       });

    //     }
    //   }
    // });
  });
</script>